主要参考：[C++设计模式系列文章](https://zhuanlan.zhihu.com/p/94877789)



### 结构型设计模式

结构型模式描述如何将**类和对象组合**起来，形成更大的结构，就像搭积木，可以通过简单积木的组合形成复功能更为强大的积木。

- 类结构模式 : 由多个类可以组成一个更大的系统，在类结构模式中只存在**继承关系和实现关系**
- 对象结构模式 : 通过**关联关系**使得在一个类中定义另一个类的实例对象，然后通过该对象调用其方法。根据合成复用原则，在系统中尽量使用关联关系来替代继承关系，因此大部分结构模式都是对象结构模式

------

### 适配器模式

##### 定义

- 将一个类的接口转换成客户希望的另一个接口。适配器模式让那些接口不兼容的类可以一起工作。
- **类适配器中，适配器类通过继承适配者类**，并重新实现适配者的具体接口来达到适配客户所需要的接口的目的。
- **对象适配器中，适配器类通过在类中实例化一个适配者类的对象**，并将其封装在客户所需功能的接口里，达到最终的适配目的。

##### 模式结构

适配器模式分为类适配器和对象适配器。

- **适配器类（Adapter）**：适配器与适配者之间是继承或实现关系；
- **适配者类（Adaptee）**：适配器与适配者之间是关联关系。
- **目标抽象类（Target）**：定义客户所需要的接口。

##### 优点

- 将目标类和适配者类解耦，引入一个适配器类实现代码重用，无需修改原有结构；
- 增加类的透明和复用，对于客户端而言，适配者类是透明的；
- 对象适配器可以把不同适配者适配到同一个目标（对象适配器）；

##### 缺点

- 对编程语言的限制：Java不支持多重继承，一次最多只能适配一个适配者类，不能同时适配多个适配者类；

##### 适用环境

- 系统需要使用一些现有的类，但这些类的接口不符合系统需要，或者没有这些类的源代码；
- 想创建一个重复使用的类，用于和一些彼此没有太大关联的类一起工作。

------

### 桥接模式

##### 定义

- **将抽象部分与它的实现部分解耦，使得两者都能够独立变化。**
- **桥接模式将两个独立变化的维度设计成两个独立的继承等级结构（而不会将两者耦合在一起形成多层继承结构），在抽象层将二者建立起一个抽象关联，该关联关系类似一座桥，将两个独立的等级结构连接起来**，故曰“桥接模式”。

##### 模式结构

- **Abstraction（抽象类）**：定义抽象类的接口（抽象接口），由聚合关系可知，抽象类中包含一个Implementor类型的对象，它与Implementor之间有**关联关系**，既可以包含抽象业务方法，也可以包含具体业务方法；

- **Implementor（实现类接口）**：定义实现类的接口，这个接口可以与Abstraction类的接口不同。一般而言，实现类接口只定义基本操作，而抽象类的接口还可能会做更多复杂的操作。

- **RefinedAbstraction（扩充抽象类）**：具体类，实现在抽象类中定义的接口，可以调用在Implementor中定义的方法；

- **ConcreteImplementor（具体实现类）**：具体实现了Implementor接口，在不同的具体实现类中实现不同的具体操作。运行时ConcreteImplementor将替换父类。

  简言之，在Abstraction类中维护一个**Implementor**类指针，需要采用不同的实现方式的时候只需要传入不同的**Implementor**派生类就可以了。

##### 优点

- 分离抽象接口与实现部分，使用对象间的关联关系使抽象与实现解耦；
- 桥接模式可以取代多层继承关系，多层继承违背单一职责原则，不利于代码复用；
- 桥接模式提高了系统可扩展性，某个维度需要扩展只需增加实现类接口或者具体实现类，而且不影响另一个维度，符合开闭原则。

##### 缺点

- 桥接模式难以理解，因为关联关系建立在抽象层，需要一开始就设计抽象层；
- 如何准确识别系统中的两个维度是应用桥接模式的难点。

**适用环境**

- 如果一个系统需要在抽象化和具体化之间增加灵活性，避免在两个层次之间增加继承关系，可以使用桥接模式在抽象层建立关联关系；

- 抽象部分和实现部分可以各自扩展而互不影响；

- 一个类存在多个独立变化的维度，可采用桥接模式。

  ------

